initContainers:
  init-portal-iam:
    image:
      registry: docker-registry.inventage.com:10116

ingress:
  host: portal1.local.uniport.ch.
  className: nginx
  tls:
    enabled: false
containers:
  uniport-gateway:
    storages:
      proxy-config:
        type: configMap
        configMapName: uniport-gateway-proxy-config
        mountPath: /etc/uniport-gateway/default
        items:
          - key: uniport-gateway.json
            path: uniport-gateway.json
          - key: dynamic-config..analytics..config.json
            path: dynamic-config/analytics/config.json
          - key: dynamic-config..auth..config.json
            path: dynamic-config/auth/config.json
          - key: dynamic-config..base..config.json
            path: dynamic-config/base/config.json
          - key: dynamic-config..content..config.json
            path: dynamic-config/content/config.json
          - key: dynamic-config..conversation..config.json
            path: dynamic-config/conversation/config.json
          - key: dynamic-config..csp..config.json
            path: dynamic-config/csp/config.json
          - key: dynamic-config..dashboard..config.json
            path: dynamic-config/dashboard/config.json
          - key: dynamic-config..filestorage..config.json
            path: dynamic-config/filestorage/config.json
          - key: dynamic-config..general..config.json
            path: dynamic-config/general/config.json
          - key: dynamic-config..notification..config.json
            path: dynamic-config/notification/config.json
          - key: dynamic-config..organisation..config.json
            path: dynamic-config/organisation/config.json
          - key: dynamic-config..portal-database..config.json
            path: dynamic-config/portal-database/config.json
          - key: dynamic-config..portal-iam..config.json
            path: dynamic-config/portal-iam/config.json
          - key: dynamic-config..portal-messaging..config.json
            path: dynamic-config/portal-messaging/config.json
          - key: dynamic-config..portal-monitoring..config.json
            path: dynamic-config/portal-monitoring/config.json
    resources:
      requests:
        memory: "512Mi"
      limits:
        memory: "512Mi"
    env:
      UNIPORT_GATEWAY_CLUSTERED:
        value: "false"
      # UNIPORT_GATEWAY_PUBLIC_HOSTNAME is the HTTP host name for external access
      UNIPORT_GATEWAY_PUBLIC_HOSTNAME:
        value: "portal1.local.uniport.ch."
      # UNIPORT_GATEWAY_PUBLIC_PORT is the HTTP port for external access
      UNIPORT_GATEWAY_PUBLIC_PORT:
        value: "29000"
      # UNIPORT_GATEWAY_PUBLIC_PROTOCOL HTTP protocol for external access
      UNIPORT_GATEWAY_PUBLIC_PROTOCOL:
        value: "http"
      # UNIPORT_GATEWAY_BEARER_TOKEN_ISSUER is the expected value for the "iss" claim
      UNIPORT_GATEWAY_BEARER_TOKEN_ISSUER:
        value: "http://portal1.local.uniport.ch.:29000/auth/realms/portal"
      UNIPORT_GATEWAY_LOG_LEVEL:
        value: "DEBUG"
      UNIPORT_GATEWAY_HEADLESS_SERVICE_NAME:
        value: "uniport-gateway-headless.portal1.svc.cluster.local"
      OTEL_TRACES_EXPORTER:
        value: "otlp"
      OTEL_EXPORTER_OTLP_ENDPOINT:
        value: "http://portal-monitoring-open-telemetry-collector.monitoring:4317"
pod:
  replicas: 1
  annotations:
    rollme: true

configMaps:
  uniport-gateway-proxy-config:
    enabled: true
    # The '..' character in the following key names DO NOT have a special meaning.
    # Its a limitation of k8s that configmap key have to consist of alphanumeric characters, -, _ or .
    # With the '..' characters we want to symbolize the path the config file will live under.
    data:
      uniport-gateway.json:
        valueFromFile: proxy-config.examples/uniport-gateway.json
      dynamic-config..analytics..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/analytics/config.json
      dynamic-config..auth..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/auth/config.json
      dynamic-config..base..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/base/config.json
      dynamic-config..content..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/content/config.json
      dynamic-config..conversation..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/conversation/config.json
      dynamic-config..csp..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/csp/config.json
      dynamic-config..dashboard..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/dashboard/config.json
      dynamic-config..filestorage..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/filestorage/config.json
      dynamic-config..general..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/general/config.json
      dynamic-config..notification..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/notification/config.json
      dynamic-config..organisation..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/organisation/config.json
      dynamic-config..portal-database..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/portal-database/config.json
      dynamic-config..portal-iam..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/portal-iam/config.json
      dynamic-config..portal-messaging..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/portal-messaging/config.json
      dynamic-config..portal-monitoring..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/portal-monitoring/config.json
