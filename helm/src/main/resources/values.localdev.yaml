ingress:
  host: portal1.localdev.me
  className: nginx
  tls:
    enabled: false
containers:
  portal-gateway:
    storages:
      proxy-config:
        type: configMap
        configMapName: portal-gateway-proxy-config
        mountPath: /etc/portal-gateway/default
        items:
          - key: portal-gateway.json
            path: portal-gateway.json
          - key: dynamic-config..analytics..config.json
            path: dynamic-config/analytics/config.json
          - key: dynamic-config..auth..config.json
            path: dynamic-config/auth/config.json
          - key: dynamic-config..base..config.json
            path: dynamic-config/base/config.json
          - key: dynamic-config..content..config.json
            path: dynamic-config/content/config.json
          - key: dynamic-config..conversation..config.json
            path: dynamic-config/conversation/config.json
          - key: dynamic-config..csp..config.json
            path: dynamic-config/csp/config.json
          - key: dynamic-config..dashboard..config.json
            path: dynamic-config/dashboard/config.json
          - key: dynamic-config..filestorage..config.json
            path: dynamic-config/filestorage/config.json
          - key: dynamic-config..general..config.json
            path: dynamic-config/general/config.json
          - key: dynamic-config..notification..config.json
            path: dynamic-config/notification/config.json
          - key: dynamic-config..organisation..config.json
            path: dynamic-config/organisation/config.json
          - key: dynamic-config..portal-database..config.json
            path: dynamic-config/portal-database/config.json
          - key: dynamic-config..portal-iam..config.json
            path: dynamic-config/portal-iam/config.json
          - key: dynamic-config..portal-messaging..config.json
            path: dynamic-config/portal-messaging/config.json
          - key: dynamic-config..portal-monitoring..config.json
            path: dynamic-config/portal-monitoring/config.json
    resources:
      requests:
        memory: "512Mi"
      limits:
        memory: "512Mi"
    env:
      # PORTAL_GATEWAY_PUBLIC_HOSTNAME is the HTTP host name for external access
      PORTAL_GATEWAY_PUBLIC_HOSTNAME:
        value: "portal1.localdev.me"
      # PORTAL_GATEWAY_PUBLIC_PORT is the HTTP port for external access
      PORTAL_GATEWAY_PUBLIC_PORT:
        value: "29000"
      # PORTAL_GATEWAY_PUBLIC_PROTOCOL HTTP protocol for external access
      PORTAL_GATEWAY_PUBLIC_PROTOCOL:
        value: "http"
      # PORTAL_GATEWAY_BEARER_TOKEN_ISSUER is the expected value for the "iss" claim
      PORTAL_GATEWAY_BEARER_TOKEN_ISSUER:
        value: "http://portal1.localdev.me:29000/auth/realms/portal"
      PORTAL_GATEWAY_LOG_LEVEL:
        value: "DEBUG"

configMaps:
  portal-gateway-proxy-config:
    enabled: true
    # The '..' character in the following key names DO NOT have a special meaning.
    # Its a limitation of k8s that configmap key have to consist of alphanumeric characters, -, _ or .
    # With the '..' characters we want to symbolize the path the config file will live under.
    data:
      portal-gateway.json:
        valueFromFile: proxy-config.examples/portal-gateway.json
      dynamic-config..analytics..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/analytics/config.json
      dynamic-config..auth..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/auth/config.json
      dynamic-config..base..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/base/config.json
      dynamic-config..content..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/content/config.json
      dynamic-config..conversation..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/conversation/config.json
      dynamic-config..csp..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/csp/config.json
      dynamic-config..dashboard..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/dashboard/config.json
      dynamic-config..filestorage..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/filestorage/config.json
      dynamic-config..general..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/general/config.json
      dynamic-config..notification..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/notification/config.json
      dynamic-config..organisation..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/organisation/config.json
      dynamic-config..portal-database..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/portal-database/config.json
      dynamic-config..portal-iam..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/portal-iam/config.json
      dynamic-config..portal-messaging..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/portal-messaging/config.json
      dynamic-config..portal-monitoring..config.json:
        valueFromFile: proxy-config.examples/dynamic-config/portal-monitoring/config.json
