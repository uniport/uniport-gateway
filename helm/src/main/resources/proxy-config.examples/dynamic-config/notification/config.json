{
    "http": {
        "routers": [
            {
                "name": "notification",
                "middlewares": [
                    "notificationCSP",
                    "notificationRedirectRegex",
                    "notificationOauth2",
                    "notificationAuthBearer",
                    "notificationReplacePath",
                    "notificationCheckRoute"
                ],
                "rule": "PathPrefix('/notification')",
                "service": "notification-proxy"
            }
        ],
        "middlewares": [
            {
                "name": "notificationCSP",
                "type": "csp",
                "options": {
                    "policyDirectives": [
                        {
                            "directive": "connect-src",
                            "values": [
                                "data:"
                            ]
                        }
                    ]
                }
            },
            {
                "name": "notificationRedirectRegex",
                "type": "redirectRegex",
                "options": {
                    "regex": "^(/notification)$",
                    "replacement": "$1/"
                }
            },
            {
                "name": "notificationReplacePath",
                "type": "replacePathRegex",
                "options": {
                    "regex": "/notification/(.*)",
                    "replacement": "/$1"
                }
            },
            {
                "name": "notificationAuthBearer",
                "type": "authorizationBearer",
                "options": {
                    "sessionScope": "Notification"
                }
            },
            {
                "name": "notificationOauth2",
                "type": "oauth2",
                "options": {
                    "clientId": "Portal-Gateway",
                    "clientSecret": "Portal-Gateway!",
                    "discoveryUrl": "http://${PORTAL_GATEWAY_PORTAL_IAM_HOST}:${PORTAL_GATEWAY_PORTAL_IAM_PORT}/auth/realms/portal",
                    "sessionScope": "Notification"
                }
            },
            {
                "name": "notificationCheckRoute",
                "type": "checkRoute"
            }
        ],
        "services": [
            {
                "name": "notification-proxy",
                "servers": [
                    {
                        "host": "${PORTAL_GATEWAY_NOTIFICATION_HOST}",
                        "port": "${PORTAL_GATEWAY_NOTIFICATION_PORT}"
                    }
                ]
            }
        ]
    }
}
