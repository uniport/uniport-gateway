{
  "entrypoints": [
    {
      "name": "http8000",
      "port": 8000
    }
  ],
  "applications": [
    {
      "name": "proxy",
      "entrypoint": "http8000",
      "requestSelector": {
        "urlPrefix": "/"
      },
      "provider": "ProxyApplication"
    }
  ],
  "proxies": [
    {
      "name": "auth",
      "pathPrefix": "/auth",
      "middleware": {
        "headers": [ { "provider": "ForwardedHostHeader" }, { "provider":  "TestHeader"} ]
      },
      "service": "portal-iam"
    },
    {
      "name": "one",
      "pathPrefix": "/one",
      "middleware": {
        "headers": [ { "provider": "ForwardedHostHeader" }, { "provider": "AuthorizationBearerHeader" }, { "provider":  "TestHeader"} ],
        "uris": [ { "provider":  "ReplacePathByRegex", "regex": "^/one/", "replacement": "/"} ]
      },
      "service": "httpbin8888"
    },
    {
      "name": "two-login-redirect",
      "pathPrefix": "/two/login",
      "sessionScope": "two",
      "service": "login"
    },
    {
      "name": "two",
      "pathPrefix": "/two",
      "middleware": {
        "headers": [ { "provider": "ForwardedHostHeader" }, { "provider": "AuthorizationBearerHeader" }, { "provider":  "TestHeader"} ],
        "uris": [ { "provider":  "ReplacePathByRegex", "regex": "^/two/", "replacement": "/"} ]
      },
      "service": "httpbin8889"
    }
  ],
  "services": [
    {
      "name": "portal-iam",
      "provider": "com.inventage.portal.gateway.proxy.service.ServiceJsonFileProvider",
      "serverHost": "localhost",
      "serverPort": 8080
    },
    {
      "name": "httpbin8888",
      "provider": "com.inventage.portal.gateway.proxy.service.ServiceJsonFileProvider",
      "serverHost": "localhost",
      "serverPort": 8888
    },
    {
      "name": "httpbin8889",
      "provider": "com.inventage.portal.gateway.proxy.service.ServiceJsonFileProvider",
      "serverHost": "localhost",
      "serverPort": 8889
    },
    {
      "name": "login",
      "provider": "com.inventage.portal.gateway.proxy.service.RedirectServiceProvider",
      "destination": "/two/headers"
    }
  ]
}