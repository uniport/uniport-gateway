{
  "http": {
    "routers": [
      {
        "name": "organisation-service",
        "middlewares": ["organisationOauth2", "organisationAuthBearer"],
        "rule": "PathPrefix('/organisation/service')",
        "service": "/organisation_portal1-organisation-service_1",
        "entrypoints": ["http8000"]
      },
      {
        "name": "navigation-service",
        "middlewares": ["navigationAuthBearer"],
        "rule": "PathPrefix('/navigation/service')",
        "service": "/navigation_portal1-navigation-service_1",
        "entrypoints": ["http8000"]
      },
      {
        "name": "dashboard-service",
        "middlewares": ["dashboardAuthBearer"],
        "rule": "PathPrefix('/dashboard/service')",
        "service": "/dashboard_portal1-dashboard-service_1",
        "entrypoints": ["http8000"]
      },
      {
        "name": "document-service",
        "middlewares": ["documentOauth2", "documentAuthBearer"],
        "rule": "PathPrefix('/document/service')",
        "service": "/document_portal1-document-service_1",
        "entrypoints": ["http8000"]
      },
      {
        "name": "organisation-frontend",
        "middlewares": [
          "organisationRedirectRegex",
          "organisationOauth2",
          "organisationAuthBearer",
          "organisationReplacePath"
        ],
        "rule": "PathPrefix('/organisation')",
        "service": "/organisation_portal1-organisation-frontend_1",
        "entrypoints": ["http8000"]
      },
      {
        "name": "navigation-frontend",
        "middlewares": [
          "navigationRedirectRegex",
          "navigationAuthBearer",
          "navigationReplacePath"
        ],
        "rule": "PathPrefix('/navigation')",
        "service": "/navigation_portal1-navigation-frontend_1",
        "entrypoints": ["http8000"]
      },
      {
        "name": "dashboard-frontend",
        "middlewares": [
          "dashboardRedirectRegex",
          "dashboardAuthBearer",
          "dashboardReplacePath",
          "dashboardLoginRedirectRegex",
          "dashboardOauth2",
          "rootRedirectregex"
        ],
        "rule": "PathPrefix('/dashboard')",
        "service": "/dashboard_portal1-dashboard-frontend_1",
        "entrypoints": ["http8000"]
      },
      {
        "name": "dashboard-login",
        "middlewares": [
          "dashboardOauth2",
          "dashboardLoginRedirectRegex",
          "dashboardAuthBearer",
          "dashboardRedirectRegex",
          "dashboardReplacePath",
          "rootRedirectregex"
        ],
        "rule": "Path('/dashboard/login')",
        "service": "/dashboard_portal1-dashboard-frontend_1",
        "entrypoints": ["http8000"]
      },
      {
        "name": "document-frontend",
        "middlewares": [
          "documentRedirectRegex",
          "documentOauth2",
          "documentAuthBearer",
          "documentReplacePath"
        ],
        "rule": "PathPrefix('/document')",
        "service": "/document_portal1-document-frontend_1",
        "entrypoints": ["http8000"]
      },
      {
        "name": "auth",
        "rule": "PathPrefix('/auth')",
        "service": "/portal-iam_portal1-portal-iam_1",
        "entrypoints": ["http8000"]
      },
      {
        "name": "root",
        "middlewares": [
          "rootRedirectregex",
          "dashboardAuthBearer",
          "dashboardLoginRedirectRegex",
          "dashboardOauth2",
          "dashboardRedirectRegex",
          "dashboardReplacePath"
        ],
        "rule": "Path('/')",
        "service": "/dashboard_portal1-dashboard-frontend_1",
        "entrypoints": ["http8000"]
      }
    ],
    "middlewares": [
      {
        "name": "documentAuthBearer",
        "type": "authorizationBearer",
        "options": { "sessionScope": "documentScope" }
      },
      {
        "name": "documentOauth2",
        "type": "oauth2",
        "options": {
          "clientId": "Document",
          "clientSecret": "Document!",
          "discoveryUrl": "http://localhost:29001/auth/realms/portal",
          "sessionScope": "documentScope"
        }
      },
      {
        "name": "documentRedirectRegex",
        "type": "redirectRegex",
        "options": { "regex": "^(/document)$", "replacement": "$1/" }
      },
      {
        "name": "documentReplacePath",
        "type": "replacePathRegex",
        "options": { "regex": "/document/(.*)", "replacement": "/$1" }
      },
      {
        "name": "organisationAuthBearer",
        "type": "authorizationBearer",
        "options": { "sessionScope": "organisationScope" }
      },
      {
        "name": "organisationOauth2",
        "type": "oauth2",
        "options": {
          "clientId": "Organisation",
          "clientSecret": "Organisation!",
          "discoveryUrl": "http://localhost:29001/auth/realms/portal",
          "sessionScope": "organisationScope"
        }
      },
      {
        "name": "organisationRedirectRegex",
        "type": "redirectRegex",
        "options": { "regex": "^(/organisation)$", "replacement": "$1/" }
      },
      {
        "name": "organisationReplacePath",
        "type": "replacePathRegex",
        "options": { "regex": "/organisation/(.*)", "replacement": "/$1" }
      },
      {
        "name": "navigationAuthBearer",
        "type": "authorizationBearer",
        "options": { "sessionScope": "id" }
      },
      {
        "name": "navigationRedirectRegex",
        "type": "redirectRegex",
        "options": { "regex": "^(/navigation)$", "replacement": "$1/" }
      },
      {
        "name": "navigationReplacePath",
        "type": "replacePathRegex",
        "options": { "regex": "/navigation/(.*)", "replacement": "/$1" }
      },
      {
        "name": "dashboardAuthBearer",
        "type": "authorizationBearer",
        "options": { "sessionScope": "dashboardScope" }
      },
      {
        "name": "dashboardLoginRedirectRegex",
        "type": "redirectRegex",
        "options": {
          "regex": "^(/dashboard/login)$",
          "replacement": "/dashboard/"
        }
      },
      {
        "name": "dashboardOauth2",
        "type": "oauth2",
        "options": {
          "clientId": "Dashboard",
          "clientSecret": "Dashboard!",
          "discoveryUrl": "http://localhost:29001/auth/realms/portal",
          "sessionScope": "dashboardScope"
        }
      },
      {
        "name": "dashboardRedirectRegex",
        "type": "redirectRegex",
        "options": { "regex": "^(/dashboard)$", "replacement": "$1/" }
      },
      {
        "name": "dashboardReplacePath",
        "type": "replacePathRegex",
        "options": { "regex": "/dashboard/(.*)", "replacement": "/$1" }
      },
      {
        "name": "rootRedirectregex",
        "type": "redirectRegex",
        "options": { "regex": "^/$", "replacement": "/dashboard/" }
      }
    ],
    "services": [
      {
        "name": "/organisation_portal1-organisation-service_1",
        "servers": [{ "host": "127.0.1.1", "port": 29032 }]
      },
      {
        "name": "/document_portal1-document-frontend_1",
        "servers": [{ "host": "127.0.1.1", "port": 29055 }]
      },
      {
        "name": "/organisation_portal1-organisation-frontend_1",
        "servers": [{ "host": "127.0.1.1", "port": 29035 }]
      },
      {
        "name": "/navigation_portal1-navigation-frontend_1",
        "servers": [{ "host": "127.0.1.1", "port": 29015 }]
      },
      {
        "name": "/navigation_portal1-navigation-service_1",
        "servers": [{ "host": "127.0.1.1", "port": 29012 }]
      },
      {
        "name": "/dashboard_portal1-dashboard-service_1",
        "servers": [{ "host": "127.0.1.1", "port": 29022 }]
      },
      {
        "name": "/document_portal1-document-service_1",
        "servers": [{ "host": "127.0.1.1", "port": 29052 }]
      },
      {
        "name": "/dashboard_portal1-dashboard-frontend_1",
        "servers": [{ "host": "127.0.1.1", "port": 29025 }]
      },
      {
        "name": "/portal-iam_portal1-portal-iam_1",
        "servers": [{ "host": "127.0.1.1", "port": 29001 }]
      }
    ]
  }
}
